<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>bestFromGa</title>
  <script type="text/javascript" src="utils.js"></script>
  <script type="text/javascript" src="jquery-latest.min.js"></script>
  <!-- Leaflet -->
  <link rel="stylesheet" href="leaflet/leaflet.css">
  <script src="leaflet/leaflet.js"></script>
  <!-- -->
  <!-- awesome-numbered-marker -->
  <link rel="stylesheet" href="Leaflet.awesome-numbered-marker-master/src/leaflet_awesome_number_markers.css" />
  <script src="Leaflet.awesome-numbered-marker-master/src/leaflet_awesome_number_markers.js"></script>
  <!--  -->
  <link rel="stylesheet" href="style.css" />
  <script src='common.js'></script>
  <script src='mapFunctions.js'></script>
  <script>
  'use strict';

  $(document).ready(function() {

    let map = initMap();

    $.get("bestFromGa", function(bestResult) {

      let markersColors = ["darkred", "blue", "green", "orange", "black", "purple"];

      let tours = bestResult.trips;

      let infosList = $('#infos ul');

      infosList.append($('<li>').html(bestResult.genNumber + "<sup>ème</sup> génération"));
      infosList.append($('<li>').text('id partition : ' + bestResult.partitionId));
      infosList.append($('<li>').text('obtenu en : ' + utils.s2hours(bestResult.totalTime / 1000, true)));

      for (let i in tours) {

        let tour = tours[i];

        infosList.append($('<li>').text('durée ' + markersColors[i] + ' : ' + utils.s2hours(tour.trip.trips[0].duration, false)));

        let routeLayer = L.geoJSON(tour.trip.trips[0].geometry).addTo(map);
        routeLayer.setStyle(function(feature) {
          return {
            color: markersColors[i]
          };
        });

        L.geoJSON(tour.addresses).addTo(map);

      }

    });

  });
  </script>
</head>

<body>
  <h1><a href="index.html">bestFromGa</a></h1>
  <nav>
    <ul>
      <li><a href="simu.html">simulation</a></li>
      <li><a href="testTournee.html">testTournee.html</a></li>
      <li><a href="socketio.html">recherche de meilleures tournées</a></li>
    </ul>
  </nav>
  <div id="infos">
    <ul>
    </ul>
  </div>
  <div id="map"></div>
</body>

</html>
